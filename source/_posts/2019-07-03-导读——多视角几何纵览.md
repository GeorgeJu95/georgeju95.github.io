---
title: 导读——多视角几何纵览
date: 2019-07-03 10:01:00
categories: 
toc: true
tags: [多视角几何]
---

本章介绍了本书中涉及的主要思想。对这些主题进行了非正式的介绍。精确、明确的定义，细致的代数以及精心设计的估算算法的描述被推迟到本书的第2章和后续章节。在整个介绍中，我们通常不会给这些后面的章节提供具体的前瞻性指示。所引用的材料可以通过使用索引或目录来定位。
<!-- more -->

## 1.1 介绍——无处不在的射影几何

我们都熟悉射影变换。当我们看一张图片时，我们看到的是不是很正的正方形，或者不是很圆的圆圈。将这些平面对象映射到图片上的变换是射影变换的一个例子。

那么通过射影变换保留了哪些几何属性？当然，形状没有保留，因为圆圈可能显示为椭圆形。长度也没有保留，因为通过射影变换将圆的两个垂直半径拉伸了不同的量。角度、距离、距离比率——这些都不会被保留，可能看起来通过射影变换保留了非常少的几何性质。但是有一个属性被保留下来了，那就是直线性。事实证明，这是对映射的最一般的要求，并且我们可以将平面的射影变换定义为保留了直线性的平面上的点的任何映射。

为了了解我们为什么需要投影几何，我们从熟悉的欧几里德几何开始。
这是描述对象的角度和形状的几何。欧几里德几何在一个主要方面很麻烦——我们需要不断推理几何的一些基本概念，例如线的交叉。两条线（我们在这里考虑的是二维几何）几乎总是在一个点上相遇，但是有一些线不会这样——我们称之为平行线。一个常见的语言描述是说平行线在“无穷远处”相交。然而，这并不是完全令人信服的，并且与另一个声明相矛盾，即在现实中并不存在“无穷”，它只是一个方便的说法。 我们可以通过加入平行线相交的无穷远处的点来完善欧几里德平面，并将它们称为“理想点”

通过添加这些在无穷远处的点，熟悉的欧几里德空间被转换为一种新型的几何对象——射影空间。这是一种非常有用的思维方式，因为我们熟悉欧氏空间的属性，比如距离、角度、点、线和入射等概念。射影空间没有什么神秘之处——它只是欧几里德空间的延伸，两条线总是在一个点上相遇，尽管有时这个点是在神秘的无穷远处。

##### 坐标

欧几里德2维空间中的一个点由有序的实数对（x，y）表示。我们可以为这一对添加一个额外的坐标，给出一个三元组（x，y，1），我们声明它们代表相同的点。这似乎没有问题，因为我们可以通过添加或删除最后一个坐标，使该点的两个坐标表示可以相互转换。我们现在关注最重要的一步，为什么最后一个坐标是1——毕竟，其他两个坐标不是那么被其约束。坐标三元组（x，y，2）怎么样？在这里，我们做出一个定义并说（x，y，1）和（2x，2y，2）代表相同的点，而且对于任何非零值k，（kx，ky，k）也代表相同的点。形式上，点由坐标三元组的等价类表示，其中两个三元组在它们相差一个共同倍数时是等价的。这些被称为<mark>点的齐次坐标</mark>。给定坐标三元组（kx，ky，k），我们可以通过除以k得到原始坐标得到（x，y）。

读者将观察到虽然（x，y，1）表示与坐标对（x，y）相同的点，但没有对应于三元组（x，y，0）的点。如果我们试图除以最后一个坐标，我们得到无限的点（x / 0，y / 0）。这就是在无限远处产生的点。它们是由最后一个坐标为零的齐次坐标表示的点。

一旦我们看到如何为二维欧几里德空间做到这一点，通过将点表示为齐次向量将其扩展到射影空间，很明显我们可以在任何维度上做同样的事情。<mark>通过将点表示为齐次矢量，欧几里德空间IR<sup>n</sup>可以扩展到射影空间IP<sup>n</sup>。</mark>事实证明，二维射影空间中的无穷点形成一条线，通常称为无限远处的直线。在三维空间中，它们形成了无穷远处的平面。

##### 齐次性

在经典的欧几里德几何中，所有点都是相同的，没有区别。整个空间是均匀的。添加坐标时，似乎选择了一个点作为原点。但是，重要的是要意识到这只是选择特定坐标系时的意外。我们也可以找到一种不同的方式来构造平面，其中有个不同的起点。实际上，我们可以考虑改变欧几里德空间的坐标，其中轴被移动并旋转到不同的位置。我们可以换另一种方式思考这一点，即<mark>空间本身会转换并旋转到不同的位置</mark>。产生的操作称为<mark>欧几里德变换</mark>。

更一般的转换类型是将线性变换应用于IR<sup>n</sup>，然后是移动空间原点的欧几里德变换。我们可以将此视为空间移动，<mark>旋转和最终可能通过不同方向的不同比率线性拉伸</mark>。产生的变换称为<mark>仿射变换</mark>。

欧几里德或仿射变换的结果是，在无穷远处的点仍然存在。通过这种变换，这些点在某种程度上被保留，至少作为一组。在欧几里德或仿射几何的背景下，它们在某种程度上是有区别的，或者说是特殊的。

从射影几何的角度来看，无穷点与其他点没有任何不同。就像欧几里德空间是均匀的一样，射影空间也是如此。在齐次坐标表示中无穷远处的点具有最终坐标零，这不过是坐标系选择时的意外。通过类比欧几里德或仿射变换，我们可以定义射影空间的射影变换。欧几里德空间IR<sup>n</sup>的线性变换由应用于该点坐标的矩阵乘法表示。以相同的方式，射影空间IP<sup>n</sup>的射影变换是表示点（an（n + 1） - 矢量）~~???~~的齐次坐标的映射，其中坐标矢量乘以了非奇异矩阵。在这样的映射下，无穷远处的点（最终坐标为零）被映射到任意其他点。无法保留无穷远处的点。因此，射影空间IP<sup>n</sup>的射影变换由齐次坐标的线性变换表示。$$ X^\prime=H_{(n+1)\times(n+1)}X. $$

在计算机视觉问题中，通过将其扩展到三维（3D）射影空间，射影空间被用作表示真实3D世界的便利方式。类似地为了方便，通常将世界投影到二维表示上而形成的图像认为位于二维射影空间中。实际上，现实世界及其中的图像并不包含无限远处的点，我们需要人为指出那些虚构的点，即图像中的无穷远处的线和世界中的无穷远处的平面。出于这个原因，虽然我们通常使用射影空间，但我们知道无穷远的线和平面在某种程度上是特殊的。这违背了纯射影几何的精神，但却使它对我们的实际问题有用。一般来说，当合适时我们试图将射影空间中的所有点视为平等的点，并且在必要时将空间中的无穷远处的线或图像中的无穷远处的平面上划分出来。

### 1.1.1 仿射几何和欧几里德几何

我们已经看到，可以通过在无穷远处添加线（或平面）从欧几里德空间获得射影空间。我们现在考虑其逆过程。本讨论主要涉及二维和三维射影空间。

##### 仿射几何

我们认为射影空间最初是均匀的，没有特定的坐标系是优选的。在这样的空间中，没有平行线的概念，因为平行线（或三维情况中的平面）是在无穷远处相遇的线。然而，在射影空间中，没有关于无穷远处点存在的概念——所有点都是相同的。我们说平行性不是射影几何的概念。谈论它毫无意义。

为了使这样的概念有意义，我们需要选择一些特定的线，并确定这是无穷远处的线。这导致一种情况，尽管所有点都是相同的，但有些点比其他点更平等。因此，从一张白纸开始，并想象它延伸到无穷远处并形成射影空间IP<sup>2</sup>。我们所看到的只是空间的一小部分，看起来很像普通的欧几里德平面。现在，让我们在纸上画一条直线，并声明这是无穷远处的线。接下来，我们绘制另外两条在此无穷远处的线上相交的线。由于他们在“无穷远处的线”会面，我们将它们定义为平行。这种情况类似于通过观察有限平面所看到的情况。想象一下在地球上非常平坦的地方拍摄的照片。平面中的无穷远处的点在图像中显示为水平线。诸如铁路轨道之类的线条在图像中显示为在地平线处会合的线条。位于地平线上方的图像中的点（天空的图像）显然与世界平面上的点不对应。但是，如果我们考虑在摄像机后面向后延伸相应的光线，它将在相机后面的某个点处与平面相遇。因此，图像中的点与世界平面中的点之间存在一对一的关系。世界平面中的无穷远处的点对应于图像中的真实水平线，并且世界中的平行线对应于在地平线处相遇的线。从我们的观点来看，世界平面及其图像只是观察射影平面几何形状的另一种方式，附带上一条特殊的线条。射影平面的几何形状和特殊线被称为<mark>仿射几何</mark>，并且将一个空间中的特殊线映射到另一个空间的特殊线的任何投影变换称为<mark>仿射变换</mark>。

通过将特殊线称为“无穷远处的线”，我们能够定义平面中直线的平行。 然而，一旦我们能够定义平行性，某些其他概念也是有意义的。例如，我们可以确定平行线上两点之间的间隔相等。例如，如果A，B，C和D是点，并且线AB和CD是平行的，那么如果线AC和BD也是平行的，则我们说两个间隔AB和CD具有相等的长度。类似地，如果在平行线上存在等于两者的另一个间隔，则同一线上的两个间隔是相等的。

##### 欧式几何

通过设置射影平面中的特殊线，我们获得了平行性的概念，并获得了仿射几何。仿射几何被视为射影几何的特化，其中我们挑出一条特定的线（或平面——根据维数决定）并将其称为无穷远处的线。接下来，我们转向欧几里德几何，并表明通过挑选无穷远处的线或平面的一些特殊特征，仿射几何变为欧几里德几何。在这样做的过程中，我们介绍了本书最重要的概念之一，即<mark>绝对二次曲线</mark>。

我们首先考虑二维几何，然后从圆圈开始。请注意，<mark>圆形不是仿射几何的概念</mark>，因为平面的任意拉伸（将线保持在无穷远处）将圆形变成椭圆形。因此，几何形状不区分圆形和椭圆形。

然而，在欧几里德几何中，它们是截然不同的，并且具有重要的区别。从代数角度看，椭圆由二次方程描述。因此，预计两个椭圆最通常在四个点相交。然而，几何上显而易见的是，两个不同的圆不能在两个以上的点上相交。在代数上，我们在这里交叉两个二次曲线，或者等价地求解两个二次方程。我们应该期望获得四种解决方案。问题是，圆圈的特殊之处在于它们只在两点相交。

这个问题的答案当然是存在另外两个解决方案，两个圆圈在另外两个复杂点上相遇。
我们不必看得太远就能找到这两点。

齐次坐标（x，y，w）中的圆的等式是该形式：$$(x-aw)^2+(y-bw)^2=r^2w^2$$

这表示具有以齐次坐标$(x_0, y_0, w_0)^\mathrm{T}=(a, b, 1)^\mathrm{T}$表示中心的圆。很快就证实了点$(x, y, w)^\mathrm{T}=(1, ±i, 0)^\mathrm{T}$位于每个这样的圆上。重复一下这个有趣的事实，<u>每个圆都通过点</u>$(1, ±i, 0)^\mathrm{T}$，<u>因此它们位于任意两个圆的交点</u>。由于它们的最终坐标为零，因此这两个点位于无穷远处的线上。由于显而易见的原因，它们被称为<mark>平面的圆点</mark>。注意，尽管两个圆点是复数形式的，但它们满足一对实方程：$x^2 + y^2 = 0$; $w = 0$。

这一观察结果给出了我们如何定义欧几里德几何的线索。欧几里德几何学是由射影几何学产生的，首先挑出无穷远处的线，然后挑出在这条线上称为圆点的两个点。当然圆点是复数点，但在大多数情况下我们并不担心这一点。现在，我们可以将<mark>圆形定义为通过这两个圆点的任何圆锥曲线</mark>（由二阶方程定义的曲线）。注意，在标准欧几里德坐标系中，圆点具有坐标$(1, ±i, 0)^\mathrm{T}$。然而，在将欧几里德结构映射到射影平面时，我们可以将该线上的任何线和任何两个（复数）点指定为无穷远处的线和圆点。

作为应用这一观点的一个例子，我们注意到可以发现一般二次曲线穿过平面中的五个任意点，这可以通过计算一般二次方程$ax^2+by^2+…+fw^2=0$的系数来看出。另一方面，圆圈仅由三个点定义。另一种看待<mark>圆圈</mark>的方法是它是<mark>一个通过两个特殊点(圆点)以及其他三个点的二次曲线</mark>，因此与任何其他二次曲线一样，需要五个点来唯一地指定它。

由于挑出两个圆点，人们可以获得整个熟悉的欧氏几何形状，这一点不足为奇。特别地，诸如角度和长度比的概念可以根据圆形点来定义。然而，这些概念最容易根据欧几里德平面的某些坐标系来定义，这将在后面的章节中看到。

##### 3D欧几里德几何

我们通过指定无穷远处的线和一对圆点来从射影平面定义欧几里德平面。相同的想法可以应用于3D几何。在二维情况下，可以仔细观察球体以及它们如何相交。如代数所暗示的那样，以及两个一般的椭圆体（或其他二次曲面），两个球体相交成圆形，而不是像一般四度曲线那样。这一思路导致发现在齐次坐标$(\mathrm{X}, \mathrm{Y}, \mathrm{Z}, \mathrm{T})^\mathrm{T}$中，所有球体与无穷远处的平面相交，其方程为：$\mathrm{X}^2 + \mathrm{Y}^2 + \mathrm{Z}^2 = 0$; $\mathrm{T} = 0$.这是位于无穷远处平面上的二度曲线（圆锥曲线），仅由复数点组成。它也被称为<mark>绝对二次曲线</mark>，是本书中的关键几何实体之一，尤其是因为它与摄像机标定有关，后面将会看到。

绝对二次曲线仅由欧几里德坐标系中的上述方程定义。一般来说，我们可以认为<mark>3D欧几里德空间</mark>是从射影空间导出的，通过将特定平面挑选出来作为无穷远处的平面，并指定位于该平面中的特定二次曲线是绝对二次曲线。这些实体在射影空间的坐标系方面具有非常一般的描述。

我们在此不会详细介绍绝对二次曲线如何确定完整的欧几里德三维几何。一个例子就可以了。<mark>空间中直线的垂直度不是仿射几何中的有效概念，而是属于欧氏几何</mark>。线的垂直度可以用绝对二次曲线来定义，如下所述。通过延伸线直到它们在无穷远处的平面上相遇，我们得到两个点，称为两条线的<mark>方向</mark>。线的垂直度根据两个方向与绝对二次曲线的关系来定义。<mark>如果两个方向是相对于绝对二次曲线的共轭点，则直线是垂直的</mark>（参见图3.8（p83））。共轭点的几何和代数表示在2.8.1节（p58）中定义。简而言之，如果绝对二次曲线由3×3对称矩阵Ω<sub>∞</sub>表示，并且方向是点d<sub>1</sub>和d<sub>2</sub>，则如果$d_1^TΩ_∞d_2 = 0$则它们相对于Ω<sub>∞</sub>共轭。更一般地，角度可以根据任意坐标系中的绝对二次曲线来定义，如（3.23-p82）所表示。

## 1.2 摄像机投影

本书的主要议题之一是图像形成过程，即三维世界的二维表征的形成，以及我们可以根据图像推断出3D结构。

从三维世界到二维图像的下降是我们失去一个维度的射影过程。建模此过程的常用方法是通过中心投影，其中来自空间点的光线从3D世界点通过空间中的固定点（射影中心）绘制。该光线将与空间中的特定平面相交，并选择其作为图像平面。光线与图像平面的交点表示该点的图像。如果3D结构位于平面上，则尺寸不会下降。

该模型与摄像机的简单模型一致，其中来自世界各点的光线穿过摄像机的镜头并照射在电影或数字设备上，产生该点的图像。忽略焦点和镜头厚度等影响，合理的近似是所有光线都通过一个点，即镜头的中心。

在将射影几何应用于成像过程时，习惯上将世界建模为3D射影空间，等于带有无穷远处的点的IR<sup>3</sup>。类似地，图像的模型是2D射影平面IP<sup>2</sup>。中心射影只是从IP<sup>3</sup>到IP<sup>2</sup>的映射。如果我们考虑用齐次坐标$(\mathrm{X}, \mathrm{Y}, \mathrm{Z}, \mathrm{T})^\mathrm{T}$构成的IP<sup>3</sup>中的点并且让射影的中心是原点$(0, 0, 0, 1)^\mathrm{T}$，那么我们看到的是固定X，Y和Z的所有点$(\mathrm{X}, \mathrm{Y}, \mathrm{Z}, \mathrm{T})^\mathrm{T}$，但是变化的T形成穿过射影点中心的单个光线，因此全部映射到同一点。因此，$(\mathrm{X}, \mathrm{Y}, \mathrm{Z}, \mathrm{T})$的最终坐标与点成像的位置无关。实际上，图像点是IP<sup>2</sup>中具有齐次坐标$(\mathrm{X}, \mathrm{Y}, \mathrm{Z})^\mathrm{T}$的点。因此，映射可以由3D齐次坐标的映射表示，由3×4矩阵P表示，块结构P = [I<sub>3×3</sub>|0<sub>3</sub>]，其中I<sub>3×3</sub>是3×3单位矩阵和0<sub>3</sub>是零3矢量。考虑到不同的射影中心和图像中不同的射影坐标系，可以看出最一般的成像射影由秩3的任意3×4矩阵表示，作用于点的齐次坐标，IP<sup>3</sup>将其映射到IP<sup>2</sup>中的成像点。该矩阵P被称为<mark>摄像机矩阵</mark>。

总之，射影摄像机对空间中的点的作用可以用齐次坐标的线性映射表示：$$\begin{pmatrix}x \\\\ y \\\\ w\end{pmatrix}=\mathrm{P}_{3\times4}\begin{pmatrix}\mathrm{X} \\\\ \mathrm{Y} \\\\ \mathrm{Z} \\\\ \mathrm{T}\end{pmatrix}$$

此外，如果所有点都位于一个平面上（我们可以将其选择为平面Z = 0），那么线性映射将减少到$$\begin{pmatrix}x \\\\ y \\\\ w\end{pmatrix}=\mathrm{H}_{3\times3}\begin{pmatrix}\mathrm{X} \\\\ \mathrm{Y} \\\\ \mathrm{T}\end{pmatrix}$$

这是一种射影变换。

##### 摄像机作为点

在中心射影中，IP<sup>3</sup>中的点被映射到IP<sup>2</sup>中的点，光线中的所有点穿过射影中心投射到图像中的相同点。出于图像射影的目的，可以将沿着这种射线的所有点视为相等。我们可以更进一步，并想象通过射影中心的光线代表图像点。因此，所有图像点的集合与通过摄像机中心的光线集相同。如果我们通过它的前三个坐标$(\mathrm{X}, \mathrm{Y}, \mathrm{Z})^\mathrm{T}$表示从$(0, 0, 0, 1)^\mathrm{T}$到点$(\mathrm{X}, \mathrm{Y}, \mathrm{Z}, \mathrm{T})^\mathrm{T}$的光线，很容易看出对于任意常数k，射线$k(\mathrm{X}, \mathrm{Y}, \mathrm{Z})^\mathrm{T}$表示相同的射线。因此，光线本身由齐次坐标表示。实际上它们构成了二维射线空间。该组光线本身可以被认为是图像空间IP<sup>2</sup>的表示。在图像的这种表示中，重要的是摄像机中心，因为单独由光线组形成图像。表示来自相同射影中心的图像形成的不同相机矩阵仅反映形成图像的一组光线的不同坐标系。因此，从空间中的相同点拍摄的两个图像是射影等效的。只有当我们开始测量图像中的点时，才需要指定图像的特定坐标系。只有这样才有必要指定特定的摄像机矩阵。简而言之，我们现在忽略的模数视野，使用相同摄像机中心采集的所有图像都是等效的——它们可以通过射影变换相互映射，而无需任何关于3D点或摄像机中心位置的信息。这些问题在图1.1中说明。

![image-20190704004132914](/assets/blogImg/1.1.png)
**Fig.1.1. 相机中心是必不可少的。**
* (a) 图像形成：图像点$\mathrm{x}_i$是平面与来自空间点$\mathrm{X}_i$的光线通过相机中心C的交点。
* (b) 如果空间点是共面的，那么世界和图像平面之间存在射影变换，$\mathrm{x}\_i = \mathrm{H}\_{3×3} \mathrm{X}_i$。
* (c) 具有相同摄像机中心的所有图像通过射影变换相关，$\mathrm{x}^\prime_i = \mathrm{H}^\prime_{3×3}\mathrm{x}_i$。
* 比较(b)和(c)——在两种情况下，平面凭借通过中心的光线相互映射。
* (b)是场景和图像平面之间的映射，(c)是两个图像平面之间的映射。(d)如果摄像机中心移动，则图像通常与射影变换无关，除非(e)所有空间点均为共面。

##### 标定相机

为了充分理解图像与世界之间的欧几里德关系，有必要表达它们的相对欧几里德几何。正如我们所看到的，3D世界的欧几里德几何是通过将IP<sup>3</sup>中的特定平面指定为无限远处的平面来确定的，并且该平面中的特定圆锥Ω是绝对二次曲线。对于不在无穷远处的平面上的摄像机，世界上的无穷远处的平面一对一地映射到图像平面上。这是因为图像中的任何一点都定义了空间中的光线，该光线在单个点上与无穷远处的平面相遇。因此，世界上无穷远处的平面并没有告诉我们关于图像的任何新内容。绝对二次曲线，无穷远处的平面上的圆锥曲线，都必须投影到图像中的圆锥曲线。得到的图像曲线称为绝对二次曲线的图像，或称为IAC。如果图像中已知IAC的位置，则我们说摄像机已标定。

在标定的摄像机中，可以确定从图像中的两个点反投影的两条光线之间的角度。我们已经看到，空间中两条直线之间的角度取决于它们在相对于绝对二次曲线的无穷远处平面上的位置。在标定的摄像机中，无限远处的平面和绝对二次曲线Ω<sub>∞</sub>一对一地投影到图像平面和IAC上，表示为ω。两个图像点和ω之间的投影关系恰好等于背投影光线与无穷远处的平面和Ω∞的交点之间的关系。因此，知道IAC，可以通过从图像直接来测量光线之间的角度。因此，对于标定的摄像机，可以测量光线之间的角度，计算由图像块表示的视场或确定图像中的椭圆是否向后投影到圆锥。稍后，我们将看到它有助于我们确定重建场景的欧几里德结构。

##### 例1.1 绘画的3D重建

使用射影几何技术，在许多情况下可以从单个图像重建场景。如果不对成像场景做出一些假设，就无法做到这一点。典型的技术涉及分析诸如平行线和消失点之类的特征，以确定场景的仿射结构，例如通过确定图像中观察到的平面的无穷远处的线。关于在场景中观察到的角度的知识（或假设），尤其是正交线或平面，可以用于将仿射重建改造为欧几里德。

这种技术尚不可能完全自动化。然而，可以将射影几何知识构建到允许用户引导的场景的单视图重建的系统中。

这些技术已被用于从早期绘画大师的作品重建3D纹理映射图形模型。从文艺复兴时期开始，制作了具有极其准确视角的绘画。在图1.2中，展示了从这种绘画进行的重建。

![image-20190704004913541](/assets/blogImg/1.2.png)


